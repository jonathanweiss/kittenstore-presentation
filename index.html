<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

				<section>
					<h1>React Router</h1>
					<h2>with Kittens... and Michael Jackson</h2>

					<p>If you want to code the demo with me:</p>
					<pre><code class="hlbash" data-trim>
git clone git@github.com:jonathanweiss/kittenstore.git
cd kittenstore
npm install
npm start
					</code></pre>
				</section>

				<section>
					<h1>The demo project</h1>
					<ul>
						<li class="fragment">is based on create-react-app</li>
						<li class="fragment">contains components</li>
						<li class="fragment">mimics a simple online shop</li>
					</ul>
				</section>

				<section>
					<h1>Install react-router...</h1>
					<pre><code class="hljs">
npm install react-router@4.0.0-2 --save
					</code></pre>
				</section>

				<section>
					<h1>... and use it </h1>
					<pre><code class="hljs">
ReactDOM.render(
  <BrowserRouter>
    <App data={data} />
  </BrowserRouter>,
  document.getElementById('root'),
);
					</code></pre>
				</section>

				<section>
					<h1>Adding Matches and a Miss case</h1>
					<pre><code class="hljs">
<Match exactly pattern="/about" component={About}></Match>
<Match exactly pattern="/contact" component={Contact}></Match>
<Match exactly pattern="/cart" component={Cart}></Match>

<Miss component={Error404}></Miss>
					</code></pre>
				</section>

				<section>
					<h1>Adding links to navigation</h1>
					<pre><code class="hljs">
&lt;a href=&quot;#&quot; className={cssClasses.join(&#039; &#039;)} key={entry.link}&gt;
  {entry.isHomeLink ? &lt;i className=&quot;icon icon-home&quot; /&gt; : null}
  {entry.text}
&lt;/a&gt;
</code></pre>

					<pre><code class="hljs">
&lt;Link to={entry.link} className={cssClasses.join(&#039; &#039;)} key={entry.link}&gt;
  {entry.isHomeLink ? &lt;i className=&quot;icon icon-home&quot; /&gt; : null}
  {entry.text}
&lt;/Link&gt;
					</code></pre>
				</section>

				<section>
					<h1>Recap</h1>
					<ul>
						<li class="fragment">Switching "pages" works!</li>
						<li class="fragment">Non-existing routes are taken care of</li>
						<li class="fragment">Can we improve the navigation?</li>
					</ul>
				</section>

				<section>
					<h1>Working with props</h1>
					<ul>
						<li><strong>pattern</strong>: (string) the portion of the pattern matched.</li>
						<li><strong>pathname</strong>: (string) the portion of pathname matched.</li>
						<li><strong>isExact</strong>: (bool) whether or not the match is exact (v. partial).</li>
						<li><strong>location</strong>: the location matched.</li>
						<li><strong>params</strong>: the values parsed from the pathname corresponding by name to the dynamic segments of the pattern.				</section></li>
					</ul>
				</section>

				<section>
					<pre><code class="hljs">
const App = (props, context) => {
	return (
		<div>
			<Navigation activePath={context.location.pathname} items={props.data.navigation} />
		</div>
		);
	};

	App.contextTypes = {
		location: React.PropTypes.object,
	};
					</code></pre>
				</section>

				<section>
					<h1>Routes with parameters</h1>
					<pre><code class="hljs">
<Match pattern="/cats/:race" render={({ params }) => <List type="cats" slug={params.race} data={cats} />} />
					</code></pre>
				</section>

				<section>
					<h1>Promt user before navigation</h1>
					<pre><code class="hljs">
<NavigationPrompt message={location => (`Are you sure you want to go to ${location.pathname}`)} />
					</code></pre>
				</section>

				<section>
					<h1>Programatically navigate</h1>
					<pre><code class="hljs">
let textboxRef = null;
const startSearch = (transitionTo) => {
  const term = textboxRef.value;

  if (term.length > 0) {
    transitionTo(`/search/${term}`);
  }
};

const Navigation = (props, context) => {
  const { activePath } = props;
  const { transitionTo } = context.router;

  return (
    ....
          <input className="form-input" type="text" placeholder="search" ref={ref => textboxRef = ref} />
          <button className="btn btn-primary input-group-btn" onClick={() => startSearch(transitionTo)}>Search</button>
....

Navigation.contextTypes = {
  router: React.PropTypes.object,
};

<Match pattern="/search/:term" render={({ params }) => <SearchResult term={params.term} data={cats} />} />
					</code></pre>
				</section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'socket.io/socket.io.js', async: true },
					{ src: 'plugin/notes-server/client.js', async: true },
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
